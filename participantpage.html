<html>
	<head>
		<title>Speaker Feedback</title>
		<meta name="viewport" content="width=device-width, initial-scale=1"> 
		<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
		<link rel="stylesheet" href="css/leaderboard.css" />
		<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
		<script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
		<script src="js/knockout-2.1.0.js"></script>
		<script>
			function drawStars(count) {
				var starText = '';
				
				// add 'count' number of stars
				for (i=0.5; i<count; i++)
					starText += '<img class="star" src="img/star.png" />';
				
				// add half stars
				if ((count * 10) % 10 == 5)
					starText += '<img class="half-star" src="img/half-star.png" />';

				return starText;
			}
			$(window).load(function() {				
				// Overall viewmodel for this screen, along with initial state
				function ParticipantViewModel() {
					var self = this;
					self.name = "Klaus Randusky";
					self.hashtag = "#krandusky"
					self.imagepath = "img/unitednations/kradunsky.jpg";
					self.organization = "Emission Trading Registry Department, Austrian Federal Environment Agency";
					self.ratingcount = 7;
					self.percent = 15;
					self.rating = 3;

					// Non-editable catalog data - would come from the server
					self.tweets = [
						{ name: "Student Tweeter", twitterhandle: "@ecoangelhsu", timestamp: "3h", rating: 4, imagepath: "https://si0.twimg.com/profile_images/2227717939/Screen_Shot_2012-05-17_at_9.00.38_PM_normal.png", message: "4 star policy - very strong on the basics, could use detail for cap n trade #doho_krand" },
						{ name: "Policy Pam", twitterhandle: "@anybodytweet", timestamp: "5h", rating: 5, imagepath: "https://si0.twimg.com/profile_images/2543088081/yfNMvwD4_normal", message: "Fantastic proposal for reforestation efforts - balances growth and environment - 5stars #doho_krand" },
						{ name: "Enviro Hacker", twitterhandle: "@envhack", timestamp: "10h", rating: 1, imagepath: "https://si0.twimg.com/profile_images/2269347831/6xnfcdqfn6lbl9nbkd6o_normal.png", message: "1 star - completely neglects key stakeholder group - hackerz! #doho_krand" },
						{ name: "GHG Dude", twitterhandle: "@ghgdude2", timestamp: "10h", rating: 3, imagepath: "https://si0.twimg.com/profile_images/1783061469/Photo_on_1-26-12_at_10.06_AM_normal.jpg", message: "I give 3 stars because the policy proposal is sound, but not ambitious enough #doho_krand" },
						{ name: "Ozone Lover", twitterhandle: "@ghgdude", timestamp: "10h", rating: 2, imagepath: "https://si0.twimg.com/profile_images/85618138/n8802104_43757104_6402_normal.jpg", message: "Only 2 stars because I can't believe there are no provisions for Methane! #doho_krand" },
						{ name: "Love to Tweet", twitterhandle: "@lovetotweet", timestamp: "10h", rating: 4, imagepath: "https://si0.twimg.com/profile_images/83126918/Guy_Bio_Photo_crop_normal.jpg", message: "4 stars - only improvement would be a tighter cap on non-renewables #doho_krand" },
						{ name: "Bloomberg Impersonator", twitterhandle: "@bloomiebloom", timestamp: "10h", rating: 1, imagepath: "https://si0.twimg.com/profile_images/1815621287/MRB_Avatar_2011-2012_normal.jpg", message: "1 stars - not as progressive as cities like NYC #doho_krand" }
					];
				}

				ko.applyBindings(new ParticipantViewModel());
			});
		</script>
	</head>
	<body>
		<div data-role="page">
			<div class="header ui-bar-b">
				<img data-bind="attr : {src: imagepath}" />
				<div class="participant-info">
					<h1 data-bind="text: name"></h1>
					<p data-bind="text: organization"></p>
					<p class="hashtag-wrap">
						<span class="hashtag" data-bind="text: hashtag"></span>
						<span class="percentage-vote">avg rating</span>
					</p>
					<p>
						<span class="rating-count" data-bind="text: ratingcount + ' reviews'"></span>
						<span class="percentage-vote" data-bind="html: drawStars(rating)"></span>
					</p>
				</div>
			</div>
			<div class="tweet-bar ui-bar-c">
				<img class="twitter-logo" src="img/twitter-bird-light-bgs.png" />
				<span>recent tweets</span>
			</div>
			<div class="content" data-role="content" data-theme="a">	
				<ul class="participant-list" data-role="listview" data-bind="foreach: tweets">
					<li class="participant">
						<a href='leaderboard.html'> <!-- data-bind='click: $parent.update("#jwarner")' -->
							<img class="twitter-user-image" data-bind="attr : {src: imagepath}" />
							<div class="twitter-user-info">
								<h1 data-bind="text: name"></h1>
								<span class="twitterhandle" data-bind="text: twitterhandle"></span>
								<span class="timestamp" data-bind="text: timestamp"></span>
							</div>
							<p class="twitter-user-message" data-bind="text: message"></p>
							<p class="percentage-vote" data-bind="html: drawStars(rating)"></p>
						</a>
					</li>
				</ul>
			</div>
		</div>
	</body>
</html>